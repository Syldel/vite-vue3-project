import{d as h,v as $,K as F,o as n,k as v,w as M,b as o,q as x,t as i,u as a,i as y,c,F as L,f as N,r as f,j as b,L as P,M as V,B as T,N as E,e as I,p as R,h as j}from"./index-a0e58a8e.js";import{_ as q}from"./LoadingSpin-9a2f3351.js";import{u as D}from"./app-fetch-fb2b0fa0.js";const U=["src","alt"],A={class:"crypto-coins-list-item__text"},K=h({__name:"CryptoCoinsListItem",props:{item:{}},setup(s){const r=s,t=$(()=>`/coins/${r.item.id}`);return(e,u)=>{const _=F("router-link");return n(),v(_,{to:a(t),class:"crypto-coins-list-item"},{default:M(()=>[o("img",{src:e.item.thumb,alt:e.item.name,class:"crypto-coins-list-item__thumb"},null,8,U),o("div",A,[x(i(e.item.name)+" - "+i(e.item.symbol)+" - ",1),o("span",null,"(Market cap rank: "+i(e.item.market_cap_rank)+")",1)])]),_:1},8,["to"])}}});const z=y(K,[["__scopeId","data-v-1f66353d"]]),G={key:1},H={key:0,class:"crypto-search__error-message"},J={key:1},O={key:0,class:"crypto-search__title"},Q={key:1},W={class:"crypto-search__list-container"},X=h({__name:"CryptoSearch",props:{search:{type:String,default:""}},setup(s){const r=s,t=$(()=>`search?query=${r.search.trim().toLowerCase()}`),{data:e,error:u,statusCode:_,isFetching:p}=D(t,{refetch:!0,immediate:!1}).get().json();return(B,l)=>{var g,C,k;const d=q,w=z;return a(p)?(n(),v(d,{key:0})):(n(),c("div",G,[a(u)?(n(),c("div",H,[o("div",null,"Error: "+i(a(u)),1),o("div",null,"Status Code: "+i(a(_)),1)])):(n(),c("div",J,[(g=a(e))!=null&&g.coins&&((C=a(e))==null?void 0:C.coins.length)>0?(n(),c("h2",O," Coins list ")):(n(),c("div",Q," Liste vide ")),o("div",W,[(n(!0),c(L,null,N((k=a(e))==null?void 0:k.coins,S=>(n(),v(w,{key:S.id,item:S},null,8,["item"]))),128))])]))]))}}});const Y=y(X,[["__scopeId","data-v-c25af2c2"]]),Z={key:0,for:"search-input__input"},ee=["placeholder"],te={key:0,class:"search-input__error-message"},m=3,se=h({__name:"SearchInput",props:{label:{type:String,default:""},placeholder:{type:String,default:"Rechercher"},buttonText:{type:String,default:"Rechercher"}},emits:["submit"],setup(s,{emit:r}){const t=f(""),e=f(!1);function u(){t.value.length>=m?r("submit",t.value):e.value=!0}function _(){t.value=t.value.trim(),e.value=t.value.length<m}function p(){e.value=!1}return(B,l)=>(n(),c("form",{class:"search-input",onSubmit:l[2]||(l[2]=E(()=>{},["prevent"]))},[o("div",null,[o("div",null,[s.label?(n(),c("label",Z,i(s.label),1)):b("",!0),P(o("input",{id:"search-input__input","onUpdate:modelValue":l[0]||(l[0]=d=>T(t)?t.value=d:null),type:"text",class:"my-input search-input__input",placeholder:s.placeholder,name:"search-input__input",minlength:m,onBlur:_,onFocus:p},null,40,ee),[[V,a(t)]])]),a(e)?(n(),c("span",te,"Il faut au minimin "+i(m)+" caractÃ¨res")):b("",!0)]),o("button",{class:"my-button",onClick:l[1]||(l[1]=d=>u())},i(s.buttonText),1)],32))}});const ne=y(se,[["__scopeId","data-v-da0ae3a2"]]),oe=s=>(R("data-v-d4dca5a5"),s=s(),j(),s),ae=oe(()=>o("h1",null,[o("span",null,"Cryptos"),x(" page ")],-1)),ce=h({__name:"CryptosPage",setup(s){const r=f("");function t(e){r.value=e}return(e,u)=>{const _=ne,p=Y;return n(),c(L,null,[ae,I(_,{placeholder:"Bitcoin",onSubmit:t}),I(p,{search:a(r),class:"cryptos-page__list"},null,8,["search"])],64)}}});const le=y(ce,[["__scopeId","data-v-d4dca5a5"]]);export{le as default};
